# StatSystem

캐릭터가 사용할 변수들을 스탯 단위로 묶어서 대신 관리해주는 패키지.
효과 적용 방식을 최소한의 형태로 제공.

## 제공하는 기능

- 스탯 정의 및 등록
여러 기본 스탯과 자원 스탯을 정의하고, 캐릭터 단위로 핸들링 가능.

- 스탯 계산식
기본값, 보정값, 모디파이어가 반영된 최종값 계산.

- 스탯 모디파이어
영구/일시 보정값을 적용해 스탯 변화 처리.

- 이팩트 적용
즉시형 효과(Instant)를 스탯의 현재 값에 반영.


## 사용방법

- #### 스탯 시스템 등록
캐릭터 스크립트는 `IEntity` 인터페이스를 통해 `StatHandler` 를 보유하도록 구성.
`StatHandler` 는 스탯 초기화, 갱신, 모디파이어 등록, 이펙트 적용을 담당.
패키지 내 예제 코드에서 제공하는 **StatController** 를 구성하고 캐릭터 오브젝트에 부착하여 사용.

- #### 스탯 정의와 스탯 데이터베이스 만들기
`StatDatabase`, `StatDefinition` ScriptableObject를 만들고 DB에 스탯을 계층별로 추가.

**Attribute**: 다른 스탯 계산의 기반이 되는 1차 스탯.
힘 민첩 지능과 같은 용도로 설계함.

**SecondaryStat**: `Attribute` 의 영향을 받아서 최종값을 계산하는 스탯.
공격력과 방어력, 치명타율 같은 용도로 설계함.

**ResourceStat**: 채력, 마나 등 Current값을 가지고 소모될 수 있는 스탯으로 설계함.

`StatDefinition` 을 생성할 때,
가급적이면 Attribute로 사용한다면 A_StatName.
SecondaryStat 인 경우 S_StatName.
채력의 경우 **R_Health** 를 사용하는걸 권장함.


- #### 이팩트 생성 및 적용
  `EffectDefinition`으로 계산식과 적용방식을 정의.

  DB 기반 Effect
캐릭터가 가진 `StatDatabase`에 등록된 스탯을 기반으로 Effect의 `SourceStats` 으로 넣어서 계산할 수 있음.

  Flat 기반 Effect
스탯 DB 없이 순수 숫자로 효과를 만들고 적용.

패키지 내부의 예제 코드를 참고하여 **IStatInvoker** 의 구성 방법과 Effect 적용 방식을 알 수 있음.
!!주의!! 적용 방식으로 **Instant** 방식만 구현되어있음!

- #### 스탯 모디파이어 응용
모디파이어 기능은 구현되어 있으며, 기본적인 작동과 구조는 완성되어 있음.
향후 프로젝트 상황에 맞춰 추가적인 테스트나 확장 설계를 진행할 수 있음.